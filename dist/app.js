!function e(t,i,n){function r(o,s){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){var i=t[o][1][e];return r(i||e)},h,h.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){"use strict";function n(){c++,requestAnimationFrame(n);var e={scale:{_x:o.scale._x,_y:o.scale._y},position:{_x:o.position._x,_y:o.position._y},canvasWidth:a.view.width,canvasHeight:a.view.height};c%15==0&&u.util.worker(e),a.render(o),c>60&&(c=0)}function r(){try{var e=new s.Canvas({id:"whiteboard"});e.init(),e.addControle(),a=e.getRenderer(),o=e.getStage(),new l.Cache({limit:500,stage:o}).build(),window.onresize=function(){var t=e.getCanvas();a.resize(t.w,t.h)},u.util.init({stage:o}),n()}catch(e){console.error("APP: ",e)}}var a,o,s=e("./classes/Canvas"),l=e("./classes/Cache"),u=e("./classes/Util"),h=e("lodash"),c=0;window.onload=(setTimeout(function(){document.getElementById("loading").style.display="none",document.getElementById("whiteboard").style.visibility="visible"},1500),void r()),window._=h,window.renderer=a,window.stage=o},{"./classes/Cache":2,"./classes/Canvas":3,"./classes/Util":5,lodash:"lodash"}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i.Cache=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./Triangle"),o=function(){function e(t){n(this,e),this.stage=t.stage,this.limit=t.limit||2e3}return r(e,[{key:"build",value:function(){for(var e=new a.Triangle({visible:!0,width:300}),t=0;t<this.limit;t++)this.stage.addChild(e.buildTriangleGrid())}}]),e}();i.Cache=o},{"./Triangle":4}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("pixi.js"),o=e("d3"),s=function(){function e(t){n(this,e),this.id=t.id}return r(e,[{key:"getCanvas",value:function(){return this.elem}},{key:"getRenderer",value:function(){return this.renderer}},{key:"getContainer",value:function(){return this.container}},{key:"getStage",value:function(){return this.stage}},{key:"init",value:function(){this.canvas(),this.renderer=new a.WebGLRenderer(this.elem.w,this.elem.h,{view:this.elem.e,transparent:!0}),this.container=new a.Container,this.stage=new a.Container,this.stage.interactive=!0,this.container.addChild(this.stage)}},{key:"canvas",value:function(){var e=document.getElementById(this.id),t=e.clientWidth,i=e.clientHeight;this.elem={e:e,w:t,h:i}}},{key:"addControle",value:function(){o.select("#"+this.id).call(o.zoom().scaleExtent([.3,1e4]).on("zoom",this.zoom))}},{key:"zoom",value:function(){stage.position.x=o.event.transform.x,stage.position.y=o.event.transform.y,stage.scale.x=o.event.transform.k,stage.scale.y=o.event.transform.k}}]),e}();i.Canvas=s},{d3:"d3","pixi.js":"pixi.js"}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0}),i._HFACTOR=i.Triangle=void 0;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash")),o=function(){function e(t){n(this,e),this.width=t.width,this.visible=t.visible||!0,this.position=t.position||{x:0,y:0},this.scale=t.scale||{x:1,y:1},this.depth=t.depth||3}return r(e,[{key:"buildTriangleGrid",value:function(){this.main=this.masterTriangle(this.width);for(var e=0;e<this.depth;e++)this.main=this.faractalAction(this.main);var t=new PIXI.Graphics;return t.beginFill(16777215),this.drawTriangle(t),t.endFill(),t.position=this.position,t.scale=this.scale,void 0!==this.visible&&(t.visible=this.visible),t}},{key:"masterTriangle",value:function(e){return this.width=e,this.height=1*this.width,[{x:0,y:0,width:this.width,height:this.height,visible:!0}]}},{key:"faractalAction",value:function(e){var t=this;return this.main.map(function e(i){return i.constructor===Array?i.map(e):t.splitAction(i)})}},{key:"splitAction",value:function(e){return e.width*=.5,e.height*=.5,[e,{x:e.x+e.width,y:e.y,width:e.width,height:e.height,visible:!0},{x:e.x+e.width/2,y:e.y-1*e.width,width:e.width,height:e.height,visible:!0}]}},{key:"mergeAction",value:function(e){return e[0].width*=2,e[0].height*=2,e[0]}},{key:"drawTriangle",value:function(e){a.default.each(a.default.flattenDeep(this.main),function(t){e.moveTo(t.x,t.y),e.lineTo(t.x+t.width,t.y),e.lineTo(t.x+t.width/2,t.y-t.height),e.lineTo(t.x,t.y)})}}]),e}();i.Triangle=o,i._HFACTOR=1},{lodash:"lodash"}],5:[function(e,t,i){"use strict";function n(){var e=new Worker("/dist/worker.js");return e.onmessage=function(e){var t=JSON.parse(e.data);"updateStage"===t.type&&r(t.data)},e.onerror=function(e){console.log("Work: ",e)},e}function r(e){for(var t=0;t<e.length;t++){var i=o.children[t],n=e[t];i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height,i.visible=n.visible}for(t;t<o.children.length;t++)o.children[t].visible=!1}Object.defineProperty(i,"__esModule",{value:!0});var a,o,s,l=0,u={init:function(e){o=e.stage,a=n()},worker:function(e){var t=_.isEqual(e,s);!1===t&&l<2&&(l++,a.postMessage(JSON.stringify({type:"init",data:e}))),2!=l||t||(l=0,s=e)}};i.util=u},{}]},{},[1]);